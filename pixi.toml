[workspace]
authors = ["Michael Booth <michael@databooth.com.au>"]
channels = ["conda-forge", "https://conda.modular.com/max-nightly"]
name = "mojo-dotenv"
platforms = ["osx-arm64"]
version = "0.2.0"

[activation]
env = { MOJO_PATH = "$PIXI_PROJECT_ROOT/src" }

[tasks]
# Development tasks
mojo-version = "mojo --version"

# Individual tests (for quick iteration)
test-basic = "mojo -I src tests/test_basic.mojo"
test-escapes = "mojo -I src tests/test_escapes.mojo"
test-export = "mojo -I src tests/test_export.mojo"
test-load = "mojo -I src tests/test_load_dotenv.mojo"
test-multiline = "mojo -I src tests/test_multiline.mojo"
test-variables = "mojo -I src tests/test_variables.mojo"
test-phase3plus = "mojo -I src tests/test_phase3plus.mojo"
test-override = "mojo -I src tests/test_override.mojo"
test-helpers = "mojo -I src tests/test_helpers.mojo"
test-compat = "mojo -I src tests/test_python_compat.mojo"

# Run all tests
test-all = """bash -c '
set -e
echo "=== Running All Tests ==="
for test_file in tests/test_*.mojo; do
  echo ""
  mojo -I src "$test_file"
done
echo ""
echo "=== All Tests Complete! ==="
'"""

# Build tasks
build-package = "mkdir -p dist && mojo package src/dotenv -o dist/dotenv.mojopkg"
clean = "rm -rf dist __pycache__ .pytest_cache dotenv.mojopkg"

# Example tasks
example-simple = "mojo -I src examples/simple.mojo"

# Validation tasks
check-mojoenv = "cd ../mojoenv && mojo main.mojo"

[dependencies]
mojo = ">=0.26.1.0.dev2026010405,<0.27"
python-dotenv = ">=1.2.1,<2"
